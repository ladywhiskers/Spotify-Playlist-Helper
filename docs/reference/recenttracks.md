# RecentTracks

Методы работы с историей прослушиваний.

| Метод | Тип результата | Краткое описание |
|-------|----------------|------------------|
| [appendTracks](/reference/filter?id=appendtracks) | - | Добавить массив треков к файлу истории прослушиваний. |
| [compress](/reference/filter?id=compress) | - | Удалить незначимые данные о треках в накопительных файлах истории прослушиваний. |
| [get](/reference/filter?id=get) | Массив | Получить треки истории прослушиваний. |

## appendTracks

Добавить массив треков к файлу истории прослушиваний. Дата добавления в плейлист `added_at` становится датой прослушивания `played_at`. Если даты нет, устанавливается дата выполнения функции. Сортируется по дате прослушивания от свежих к более старым.

!> Обратите внимание на ограничение в 60 тысяч треков для истории прослушиваний. Предел можно увеличить в файле `config`.

### Аргументы :id=appendtracks-arguments {docsify-ignore}

| Имя | Тип | Описание |
|-----|-----|----------|
| `filename` | Строка | Имя файла истории прослушиваний: `SpotifyRecentTracks` или `LastfmRecentTracks`. |
| `tracks` | Массив | Добавляемые треки. |

### Возврат :id=appendtracks-return {docsify-ignore}

Нет возвращаемого значения.

### Примеры :id=appendtracks-examples {docsify-ignore}

1. Добавить в историю прослушиваний все любимые треки

```js
let tracks = Source.getSavedTracks();
RecentTracks.appendTracks('SpotifyRecentTracks', tracks);
```

## compress

Удалить незначимые данные о треках в накопительных файлах истории прослушиваний в зависимости от [параметров](/config). Предварительно создается копия файла.

?> Используется для совместимости с прошлыми версиями библиотеки. Достаточно одного выполнения, чтобы сжать файлы истории прослушиваний. Новые треки истории сжимаются автоматически.

### Аргументы :id=compress-arguments {docsify-ignore}

Аргументов нет.

### Возврат :id=compress-return {docsify-ignore}

Нет возвращаемого значения.

## get

Получить треки истории прослушиваний в зависимости от [параметров](/config). Сортировка по дате прослушивания от свежих к более старым.

### Аргументы :id=get-arguments {docsify-ignore}

| Имя | Тип | Описание |
|-----|-----|----------|
| `limit` | Число | Если указано, ограничить количество возвращаемых треков. Если нет, все доступные. |

#### Параметры истории прослушиваний

| Включенный параметр | Возвращаемый массив |
|-|-|
| `ON_SPOTIFY_RECENT_TRACKS` | История прослушиваний только Spotify. Файл `SpotifyRecentTracks`. Дубли не удаляются. |
| `ON_LASTFM_RECENT_TRACKS` | История прослушиваний только Lastfm. Файл `LastfmRecentTracks`. Дубли не удаляются.  |
| `ON_SPOTIFY_RECENT_TRACKS` и `ON_LASTFM_RECENT_TRACKS` | Объединение обоих источников с удалением дубликатов. Файл `BothRecentTracks`. |

### Возврат :id=get-return {docsify-ignore}

`tracks` (массив) - треки истории прослушиваний.

### Примеры :id=get-examples {docsify-ignore}

1. Получить массив треков истории прослушиваний. Источник треков зависит от параметров.

```js
let tracks = RecentTracks.get();
```

2. Получить 100 треков истории прослушиваний.

```js
let tracks = RecentTracks.get(100);
```
